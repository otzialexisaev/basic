<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for dist/visualizations/bar.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../prettify.css" />
    <link rel="stylesheet" href="../../base.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class='wrapper'>
  <div class='pad1'>
    <h1>
      <a href="../../index.html">All files</a> / <a href="index.html">dist/visualizations</a> bar.js
    </h1>
    <div class='clearfix'>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Statements</span>
        <span class='fraction'>0/46</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Branches</span>
        <span class='fraction'>0/4</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Functions</span>
        <span class='fraction'>0/7</span>
      </div>
      <div class='fl pad1y space-right2'>
        <span class="strong">0% </span>
        <span class="quiet">Lines</span>
        <span class='fraction'>0/46</span>
      </div>
    </div>
  </div>
  <div class='status-line low'></div>
<pre><table class="coverage">
<tr><td class="line-count quiet">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172</td><td class="line-coverage quiet"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * Simple visualization that shows the waveforms as a bar graph
 */
function <span class="fstat-no" title="function not covered" >BarVisualization(</span>){
	/*
		Define the ID, name, and initialize the container. These are a part
		of the visualization template and are necessary.
	*/
<span class="cstat-no" title="statement not covered" >	this.id = 'bar_visualization';</span>
<span class="cstat-no" title="statement not covered" >	this.name = 'Bar Visualization';</span>
<span class="cstat-no" title="statement not covered" >	this.container = '';</span>
&nbsp;
	/**
	 * Define the preferences for the visualization
	 */
<span class="cstat-no" title="statement not covered" >	this.preferences = {</span>
		bar_color: '#ff0000',
		width: 500,
		height: 200,
		inherit: true,
		spacer_width: 10,
		bar_width: 5,
		offset: 100,
		cutoff: 23
	}
&nbsp;
	/*
		Intiialize the analyser used to generate the visualization.
	*/
<span class="cstat-no" title="statement not covered" >	this.analyser = '';</span>
&nbsp;
	/*
		Initialize the local canvas height, canvas width, context, canvas
		and request animation variables.
	*/
<span class="cstat-no" title="statement not covered" >	this.canvasHeight = '';</span>
<span class="cstat-no" title="statement not covered" >	this.canvasWidth = '';</span>
<span class="cstat-no" title="statement not covered" >	this.ctx = '';</span>
<span class="cstat-no" title="statement not covered" >	this.canvas = '';</span>
<span class="cstat-no" title="statement not covered" >	this.requestAnimation = '';</span>
&nbsp;
	/**
	 * Get the ID of the visualization.
	 */
<span class="cstat-no" title="statement not covered" >	this.getID = <span class="fstat-no" title="function not covered" >fu</span>nction(){</span>
<span class="cstat-no" title="statement not covered" >		return this.id;</span>
	}
&nbsp;
	/**
	 * Get the name of the visualization.
	 */
<span class="cstat-no" title="statement not covered" >	this.getName = <span class="fstat-no" title="function not covered" >fu</span>nction(){</span>
<span class="cstat-no" title="statement not covered" >		return this.name;</span>
	}
&nbsp;
	/**
	 * Set the preferences for the visualization.
	 *
	 * @param {object} userPreferences - The user preferences for the visualization.
	 */
<span class="cstat-no" title="statement not covered" >	this.setPreferences = <span class="fstat-no" title="function not covered" >fu</span>nction( userPreferences ){</span>
<span class="cstat-no" title="statement not covered" >		for( var key in this.preferences ){</span>
<span class="cstat-no" title="statement not covered" >			if( userPreferences[ key ] != undefined) {</span>
<span class="cstat-no" title="statement not covered" >				this.preferences[key] = userPreferences[key];</span>
			}
		}
	}
&nbsp;
	/**
	 * Start the visualization.
	 *
	 * @param {Node} element - The element that will contain the visualization.
	 */
<span class="cstat-no" title="statement not covered" >	this.startVisualization = <span class="fstat-no" title="function not covered" >fu</span>nction( element ){</span>
		/*
			Set the analyser to the Amplitude analyser.
		*/
<span class="cstat-no" title="statement not covered" >		this.analyser = Amplitude.getAnalyser();</span>
&nbsp;
		/*
			Set the container to the element passed in.
		*/
<span class="cstat-no" title="statement not covered" >		this.container = element;</span>
&nbsp;
		/*
			Build a canvas element we can draw on for the visualization.
		*/
<span class="cstat-no" title="statement not covered" >		this.canvas = document.createElement('canvas');</span>
&nbsp;
		/*
			If the user wants the size of the canvas to be the size of the container,
			set the width and height of the visualization to the width and height
			of the container.
		*/
<span class="cstat-no" title="statement not covered" >		if( this.preferences.inherit ){</span>
<span class="cstat-no" title="statement not covered" >			this.preferences.width = this.container.offsetWidth;</span>
<span class="cstat-no" title="statement not covered" >			this.preferences.height = this.container.offsetHeight;</span>
		}
&nbsp;
		/*
			Set the width and height of the canvas element in the container.
		*/
<span class="cstat-no" title="statement not covered" >		this.canvas.setAttribute('width', this.preferences.width);</span>
<span class="cstat-no" title="statement not covered" >		this.canvas.setAttribute('height', this.preferences.height);</span>
&nbsp;
		/*
			Get the 2D context of the canvas and append the canvas to the container.
		*/
<span class="cstat-no" title="statement not covered" >		this.ctx = this.canvas.getContext('2d');</span>
<span class="cstat-no" title="statement not covered" >		this.container.appendChild( this.canvas );</span>
&nbsp;
		/*
			Set the local canvas height and canvas width variables to the width
			and height of the canvas. We will use these later.
		*/
<span class="cstat-no" title="statement not covered" >		this.canvasHeight = this.canvas.height;</span>
<span class="cstat-no" title="statement not covered" >		this.canvasWidth = this.canvas.width;</span>
&nbsp;
		/*
			Kick off the visualization.
		*/
<span class="cstat-no" title="statement not covered" >		this.rafCallback();</span>
	}
&nbsp;
	/**
	 * Stops the visualization and clears the container.
	 */
<span class="cstat-no" title="statement not covered" >	this.stopVisualization = <span class="fstat-no" title="function not covered" >fu</span>nction(){</span>
<span class="cstat-no" title="statement not covered" >		window.cancelAnimationFrame( this.requestAnimation );</span>
<span class="cstat-no" title="statement not covered" >		this.container.innerHTML = '';</span>
	}
&nbsp;
	/**
	 * The callback that draws the visualization based on the frequency of the song.
	 */
<span class="cstat-no" title="statement not covered" >	this.rafCallback = <span class="fstat-no" title="function not covered" >fu</span>nction( ){</span>
		/*
			Builds an animation frame that updates the visualization to what is
			in the frequency.
		*/
<span class="cstat-no" title="statement not covered" >		this.requestAnimation = window.requestAnimationFrame( this.rafCallback.bind(this), this.canvas );</span>
&nbsp;
		/*
			Get the frequency data from the analyser.
		*/
		let freqByteData = <span class="cstat-no" title="statement not covered" >new Uint8Array( this.analyser.frequencyBinCount );</span>
<span class="cstat-no" title="statement not covered" >		this.analyser.getByteFrequencyData( freqByteData );</span>
&nbsp;
		/*
			Compute how many bars we need to have
		*/
		let numberOfBars = <span class="cstat-no" title="statement not covered" >Math.round( this.canvasWidth / this.preferences.spacer_width );</span>
&nbsp;
		/*
			Build the rectangle for each of the elements in the visualization.
		*/
<span class="cstat-no" title="statement not covered" >		this.ctx.clearRect( 0, 0, this.canvasWidth, this.canvasHeight );</span>
<span class="cstat-no" title="statement not covered" >		this.ctx.fillStyle = this.preferences.bar_color;</span>
<span class="cstat-no" title="statement not covered" >		this.ctx.lineCap = 'round';</span>
&nbsp;
		/*
			Iterate over how many bars we need and draw the height based
			off of the magnitude of the wave we are displaying
		*/
<span class="cstat-no" title="statement not covered" >		for( let i = 0; i &lt; numberOfBars; i++ ){</span>
			let magnitude = <span class="cstat-no" title="statement not covered" >freqByteData[ i + this.preferences.offset ];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >			this.ctx.fillRect( i * this.preferences.spacer_width, this.canvasHeight, this.preferences.bar_width, -magnitude );</span>
		}
	}
}
&nbsp;</pre></td></tr>
</table></pre>
<div class='push'></div><!-- for sticky footer -->
</div><!-- /wrapper -->
<div class='footer quiet pad2 space-top1 center small'>
  Code coverage
  generated by <a href="https://istanbul.js.org/" target="_blank">istanbul</a> at Wed Jan 02 2019 10:19:11 GMT-0800 (PST)
</div>
</div>
<script src="../../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../../sorter.js"></script>
</body>
</html>
